<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <!-- Primary SEO -->
  <title>Portfolio | MEL3 Digital Solutions</title>
  <meta name="description" content="Selected work by MEL3 Digital Solutions: social media, content, design, ads, and web. Move your mouse or finger to explore the infinite gallery." />

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Portfolio | MEL3 Digital Solutions" />
  <meta property="og:description" content="Social media, content, design, ads, and web — a living, interactive portfolio." />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Portfolio | MEL3 Digital Solutions" />
  <meta name="twitter:description" content="Explore MEL3 DS work in an infinite horizontal gallery." />

  <!-- Assets -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="photos/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="photos/favicon.png">
  <link rel="apple-touch-icon" href="photos/favicon.png">
  <link rel="shortcut icon" href="photos/favicon.png">

  <style>
    :root{ --bg-1:#06070d; --bg-2:#0a0b14; --ink:#e9eef7; --muted:#98a2b3; --sky:#7dd3fc; }
    *{box-sizing:border-box}

    /* Ensure no sideways scroll + dynamic viewport height */
    html{height:100%; overflow-x:hidden;}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--ink);
      background:var(--bg-2);
      overflow-x:hidden;
      min-height:100dvh;
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
    .wrap{position:relative; min-height:100dvh;}

    a{color:inherit; text-decoration:none}

    /* Header */
    header{position:relative; z-index:10; max-width:1400px; margin:0 auto; padding:16px 24px}
    .brand{display:flex; align-items:center; gap:14px}
    .logo-img{width:36px; height:36px; border-radius:12px; display:block}
    .site-title{font-weight:600}
    .spacer{flex:1}
    nav{display:flex; gap:20px; color:#cbd5e1}
    nav a{opacity:.85} nav a:hover{opacity:1}

    /* Hero */
    .hero{position:relative; z-index:10; text-align:center; padding:48px 16px 12px}
    h1{margin:0; font-weight:700; letter-spacing:-.02em; font-size:clamp(26px,5vw,48px)}
    .sub{color:var(--muted); max-width:860px; margin:10px auto 0; line-height:1.6}

    /* Carousel */
    .section{position:relative; z-index:10; padding:0 16px 64px}
    .carousel{
      position:relative; max-width:1400px; margin:0 auto; height:440px; overflow:hidden;
      touch-action: pan-y; /* allow natural vertical scroll while we handle horizontal drag */
      user-select:none;
    }
    .hint{position:absolute; top:10px; left:50%; transform:translateX(-50%); color:#cbd5e180; font-size:13px; letter-spacing:.04em}
    .edge-left,.edge-right{position:absolute; top:0; bottom:0; width:96px; pointer-events:none}
    .edge-left{left:0; background:linear-gradient(90deg,var(--bg-2),transparent)}
    .edge-right{right:0; background:linear-gradient(270deg,var(--bg-2),transparent)}
    .center-line{position:absolute; top:0; bottom:0; left:50%; width:2px; transform:translateX(-50%); pointer-events:none; opacity:.12; background:linear-gradient(180deg,transparent, rgba(125,211,252,.55), transparent)}

    .track{position:absolute; inset:0; display:flex; align-items:center}
    .inner{display:flex; gap:24px; padding-left:24px; will-change:transform}

    .card{flex:0 0 auto; width:360px; height:320px; border-radius:16px; background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01)); border:1px solid rgba(255,255,255,.08); backdrop-filter:saturate(110%) blur(2px); box-shadow:0 10px 25px rgba(2,6,23,.35); transition: box-shadow .25s, transform .25s, border-color .25s}
    .card:hover{transform:translateY(-2px); border-color:rgba(255,255,255,.18); box-shadow:0 18px 48px rgba(56,189,248,.18)}
    .media{position:relative; height:252px; overflow:hidden; border-radius:16px 16px 0 0}
    .media img,.media video{width:100%; height:100%; object-fit:cover; display:block}
    .media:after{content:""; position:absolute; inset:0; background:linear-gradient(180deg,transparent 60%, rgba(0,0,0,.25))}
    .meta{padding:10px 14px}
    .title{font-size:15px; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .subt{font-size:12px; color:#cbd5e1; margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

    /* Footer */
    footer{position:relative; z-index:10; text-align:center; padding:0 24px 32px; color:#94a3b8; font-size:14px}

    /* Background layers — use dynamic viewport height */
    #starfield{position:fixed; inset:0; width:100vw; height:100dvh; z-index:0}
    .landscape{position:fixed; inset:0; height:100dvh; z-index:1; pointer-events:none}
    .mountains{position:absolute; left:0; right:0; bottom:0; height:26vh; clip-path: polygon(0% 80%,10% 70%,20% 78%,30% 68%,42% 76%,52% 62%,64% 74%,74% 66%,86% 72%,100% 64%,100% 100%,0% 100%); background: linear-gradient(180deg, rgba(12,13,22,0) 0%, rgba(12,13,22,.4) 30%, rgba(12,13,22,.95) 100%)}
    .hills{position:absolute; left:0; right:0; bottom:0; height:18vh; filter:blur(2px); clip-path: polygon(0% 60%, 8% 70%, 18% 62%, 28% 74%, 40% 66%, 52% 78%, 64% 62%, 74% 70%, 88% 58%, 100% 66%, 100% 100%, 0% 100%); background: linear-gradient(180deg, rgba(9,10,18,.2) 0%, rgba(9,10,18,.85) 60%, rgba(9,10,18,1) 100%)}
    .ground{position:absolute; left:0; right:0; bottom:0; height:12vh; background:var(--bg-2)}
    .top-vignette{position:fixed; inset:0; height:100dvh; pointer-events:none; z-index:2; background: radial-gradient(1000px 600px at 50% 0%, rgba(255,255,255,.06), transparent 60%)}

    /* Cursor polish on devices with hover */
    @media (hover:hover){
      .carousel{ cursor: grab; }
      .carousel.dragging{ cursor: grabbing; }
    }

    /* --------- Mobile tweaks --------- */
    @media (max-width: 768px){
      .hero{padding:36px 16px 10px}
      .carousel{height:380px}
      .inner{gap:16px; padding-left:16px}
      .card{width:78vw; max-width:360px; height:300px}
      .media{height:220px}
      .edge-left,.edge-right{width:48px}
      .hint{display:none}
    }

    /* Fallback for browsers without dvh support */
    @supports not (height: 100dvh){
      body{ min-height:100vh; }
      .wrap{ min-height:100vh; }
      #starfield, .landscape, .top-vignette{ height:100vh; }
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .center-line{display:none}
    }

    /* --- Zapier Chatbot: responsive sizing & position --- */
    iframe[src*="interfaces.zapier.com"]{
      position: fixed !important;
      right: 16px !important;
      bottom: 16px !important;
      width: min(92vw, 380px) !important;
      height: min(70vh, 560px) !important;
      max-width: 100% !important;
      max-height: 100% !important;
      border: 0 !important;
      border-radius: 16px !important;
      box-shadow: 0 12px 40px rgba(0,0,0,.35) !important;
      z-index: 9999 !important;
    }
    @media (max-width: 768px){
      iframe[src*="interfaces.zapier.com"]{
        width: 92vw !important;
        height: 65vh !important;
      }
    }
    zapier-interfaces-chatbot-embed{
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 9998;
    }
  </style>
</head>
<body>
  <canvas id="starfield"></canvas>
  <div class="landscape" aria-hidden="true">
    <div class="mountains"></div>
    <div class="hills"></div>
    <div class="ground"></div>
  </div>
  <div class="top-vignette"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <a href="/" aria-label="MEL3 Digital Solutions home">
          <img class="logo-img" src="photos/MEL3DSLogo3xTransparent.png" width="36" height="36" alt="MEL3 Digital Solutions logo"/>
        </a>
        <!--<div class="site-title">MEL3 Digital Solutions</div>-->
        <div class="spacer"></div>
        <nav aria-label="Main Navigation">
          <a href="/">Home</a>
          <a href="/#about">About</a>
          <a href="portfolio.html#work" aria-current="page">Portfolio</a>
          <a href="/#services">Services</a>
          <a href="/#contact">Contact</a>
        </nav>
      </div>
    </header>

    <section class="hero">
      <h1>Bold & Efficient</h1>
      <p class="sub">A living portfolio by <strong>MEL3 DS</strong>. Move your mouse <em>or finger</em> horizontally to control speed. The further from the center, the faster it scrolls. Hover/touch near center to pause.</p>
    </section>

    <section id="work" class="section">
      <div class="carousel" id="carousel">
        <div class="hint">Drag left/right or move pointer to control speed</div>
        <div class="center-line" id="centerline"></div>
        <div class="edge-left"></div>
        <div class="edge-right"></div>
        <div class="track">
          <div class="inner" id="track"></div>
        </div>
      </div>
    </section>

    <footer>© <span id="year"></span> MEL3 Digital Solutions — All rights reserved.</footer>
  </div>

  <script>
    const reducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // ================= Starfield =================
    (function(){
      const canvas = document.getElementById('starfield');
      const ctx = canvas.getContext('2d');
      let DPR = Math.max(1, Math.floor(window.devicePixelRatio || 1));

      function resize(){
        const rect = canvas.getBoundingClientRect();
        const w = Math.round(rect.width), h = Math.round(rect.height);
        canvas.width = w * DPR; canvas.height = h * DPR;
        ctx.setTransform(1,0,0,1,0,0); ctx.scale(DPR,DPR);
      }

      const density = 0.00013; // stars per px^2
      let stars = [];
      function seed(){
        const w = canvas.clientWidth, h = canvas.clientHeight; const count = Math.floor(w*h*density);
        stars = new Array(count).fill(0).map(()=>({
          x: Math.random()*w, y: Math.random()*h, z: Math.random()*0.6+0.4,
          vx: (Math.random()*0.25+0.05) * (Math.random()<.5?-1:1), tw: Math.random()*Math.PI*2
        }));
      }
      function frame(){
        const w = canvas.clientWidth, h = canvas.clientHeight;
        const g = ctx.createLinearGradient(0,0,0,h); g.addColorStop(0,'#06070d'); g.addColorStop(1,'#0a0b14');
        ctx.fillStyle=g; ctx.fillRect(0,0,w,h);
        for(const s of stars){
          s.x += s.vx * s.z; if(s.x<-2) s.x=w+2; if(s.x>w+2) s.x=-2; s.tw += 0.05 + (1-s.z)*0.03;
          const r = (0.6 + Math.sin(s.tw)*0.2) * (1.2*s.z);
          ctx.beginPath(); ctx.arc(s.x,s.y,r,0,Math.PI*2);
          ctx.fillStyle = 'rgba(255,255,255,' + (0.6 + 0.4*Math.sin(s.tw*0.7)) + ')'; ctx.fill();
        }
        const vig = ctx.createRadialGradient(w*0.5,h*0.45,0,w*0.5,h*0.45, Math.max(w,h)*0.8);
        vig.addColorStop(0,'rgba(0,0,0,0)'); vig.addColorStop(1,'rgba(0,0,0,0.45)');
        ctx.fillStyle=vig; ctx.fillRect(0,0,w,h);
      }
      const onResize = ()=>{resize(); seed(); if(!reducedMotion) requestAnimationFrame(tick); else frame(); };
      function tick(){ frame(); if(!reducedMotion) requestAnimationFrame(tick); }
      new ResizeObserver(onResize).observe(canvas);
      onResize();
    })();

    // ============== Portfolio Data (auto-expanded to 26 items) ==============
const ITEMS = [
  {type:'image', title:"Project 1 — Launch Graphics", subtitle:'IG Carousel, Brand System', src:'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1600&auto=format&fit=crop'},
  {type:'video', title:"Project 2 — Promo Reel", subtitle:'15s Vertical Reel', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'},
  {type:'image', title:"Project 3 — Brand Explorations", subtitle:'Logo grid & marks', src:'https://images.unsplash.com/photo-1526318472351-c75fcf070305?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 4 — Ad Concepts", subtitle:'OOH + Paid Social', src:'https://images.unsplash.com/photo-1492683513054-55277abccd96?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 5 — Web Redesign Study", subtitle:'UX, motion experiments', src:'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 6 — Heritage Post Series", subtitle:"Weekly content series", src:'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 7 — Food & Drink Spotlight", subtitle:'Photography & Color Grading', src:'https://images.unsplash.com/photo-1490474418585-ba9bad8fd0ea?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 8 — People Features", subtitle:'Portrait Series', src:'https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 9 — Landing Page", subtitle:'Hero + Case Layout', src:'https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1600&auto=format&fit=crop'},
  {type:'video', title:"Project 10 — Aftermovie", subtitle:'30s Recap', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'},
  {type:'image', title:"Project 11 — Seasonal Promo", subtitle:'Paid Social — A/B variants', src:'https://images.unsplash.com/photo-1520975922203-b070df22bdb7?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 12 — Menu Highlights", subtitle:'Design + Copy', src:'https://images.unsplash.com/photo-1528605248644-14dd04022da1?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 13 — Web Concept", subtitle:'Minimal layout study', src:'https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 14 — Poster Design", subtitle:'Graphic Design', src:'https://images.unsplash.com/photo-1511512578047-dfb367046420?q=80&w=1600&auto=format&fit=crop'},
  {type:'video', title:"Project 15 — Brand Reel", subtitle:'Social teaser', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'},
  {type:'image', title:"Project 16 — Campaign Concepts", subtitle:'Cross-platform content', src:'https://images.unsplash.com/photo-1503602642458-232111445657?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 17 — Event Coverage", subtitle:'Photography highlights', src:'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 18 — Product Feature", subtitle:'Studio shoot', src:'https://images.unsplash.com/photo-1490474418585-ba9bad8fd0ea?q=80&w=1600&auto=format&fit=crop'},
  {type:'video', title:"Project 19 — Behind the Scenes", subtitle:'Making-of edit', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'},
  {type:'image', title:"Project 20 — Typography Study", subtitle:'Design exploration', src:'https://images.unsplash.com/photo-1526318472351-c75fcf070305?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 21 — Social Campaign", subtitle:'Multi-format assets', src:'https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?q=80&w=1600&auto=format&fit=crop'},
  {type:'video', title:"Project 22 — Motion Graphic", subtitle:'Animated explainer', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'},
  {type:'image', title:"Project 23 — Case Study Layout", subtitle:'Presentation design', src:'https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 24 — Ad Variants", subtitle:'Performance testing', src:'https://images.unsplash.com/photo-1520975922203-b070df22bdb7?q=80&w=1600&auto=format&fit=crop'},
  {type:'image', title:"Project 25 — Event Poster", subtitle:'Promotional design', src:'https://images.unsplash.com/photo-1511512578047-dfb367046420?q=80&w=1600&auto=format&fit=crop'},
  {type:'video', title:"Project 26 — Highlight Reel", subtitle:'Recap montage', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'}
];


    // ============== Carousel Logic (desktop + mobile tuned, with finger drag) ==============
    let MAX_SPEED = 1.8;   // px/ms at far edges (desktop)
    let AUTO_DRIFT = reducedMotion ? 0 : 0.06; // 0 when reduced motion
    let SMOOTHING = 0.18;
    let DEADZONE = 0.07;
    let EASING_POWER = 2.2;
    let BRAKE = 0.82;

    let GAP = 24; // will shrink on mobile

    const CARD_CSS_WIDTH = () => {
      const first = track.querySelector('.card');
      return first ? first.getBoundingClientRect().width : 360;
    };

    function setConfigForViewport(){
      const w = window.innerWidth;
      if(w <= 768){
        MAX_SPEED = 1.2;
        AUTO_DRIFT = reducedMotion ? 0 : 0.045;
        SMOOTHING = 0.22;
        DEADZONE = 0.10;
        EASING_POWER = 2.1;
        BRAKE = 0.85;
        GAP = 16;
      } else {
        MAX_SPEED = 1.8;
        AUTO_DRIFT = reducedMotion ? 0 : 0.06;
        SMOOTHING = 0.18;
        DEADZONE = 0.07;
        EASING_POWER = 2.2;
        BRAKE = 0.82;
        GAP = 24;
      }
    }

    const carousel = document.getElementById('carousel');
    const track = document.getElementById('track');
    const year = document.getElementById('year'); year.textContent = new Date().getFullYear();

    function createCard(item){
      const card = document.createElement('div'); card.className='card';
      const media = document.createElement('div'); media.className='media';
      if(item.type==='video'){
        const v=document.createElement('video'); v.src=item.src; v.autoplay=true; v.loop=true; v.muted=true; v.playsInline=true; media.appendChild(v);
      } else {
        const img=document.createElement('img'); img.src=item.src; img.alt=item.title; img.draggable=false; media.appendChild(img);
      }
      const meta=document.createElement('div'); meta.className='meta';
      const t=document.createElement('div'); t.className='title'; t.title=item.title; t.textContent=item.title; meta.appendChild(t);
      if(item.subtitle){ const s=document.createElement('div'); s.className='subt'; s.title=item.subtitle; s.textContent=item.subtitle; meta.appendChild(s); }
      card.appendChild(media); card.appendChild(meta);
      return card;
    }

    function populate(){
      track.innerHTML='';
      const doubled = ITEMS.concat(ITEMS);
      for(const it of doubled){ track.appendChild(createCard(it)); }
    }
    populate();

    let mouseX = null; let speed = 0; let offset = 0; let trackW = 0;

    function computeTrackWidth(){
      const cardW = CARD_CSS_WIDTH();
      const gap = parseFloat(getComputedStyle(track).gap || GAP);
      trackW = ITEMS.length * (cardW + gap);
    }

    setConfigForViewport();
    computeTrackWidth();

    // --------- Interaction (hover speed + finger/mouse drag with inertia) ---------
    const onPointerMove = (clientX) => {
      const rect = carousel.getBoundingClientRect();
      mouseX = clientX - rect.left;
    };

    // Hover/pointer movement to control speed (kept for desktop/laptop)
    carousel.addEventListener('pointermove', (e)=>{ onPointerMove(e.clientX); }, {passive:true});
    carousel.addEventListener('pointerleave', ()=>{ mouseX = null; }, {passive:true});
    carousel.addEventListener('mousemove', (e)=>{ onPointerMove(e.clientX); }, {passive:true});
    carousel.addEventListener('mouseleave', ()=>{ mouseX = null; }, {passive:true});

    // Drag state + helpers
    let isDragging = false;
    let dragLastX = 0;
    let dragLastT = 0;

    const startDrag = (clientX) => {
      isDragging = true;
      dragLastX = clientX;
      dragLastT = performance.now();
      carousel.classList.add('dragging');
    };
    const moveDrag = (clientX) => {
      if(!isDragging) return;
      const now = performance.now();
      const dx = clientX - dragLastX;
      const dt = Math.max(1, now - dragLastT);

      offset = offset - dx;      // move content opposite to finger
      speed = -(dx / dt);        // px/ms, feeds inertia

      dragLastX = clientX;
      dragLastT = now;
    };
    const endDrag = () => {
      if(!isDragging) return;
      isDragging = false;
      carousel.classList.remove('dragging');
    };

    // Touch drag (passive:false so we can preventDefault while dragging)
    carousel.addEventListener('touchstart', (e)=>{
      if(e.touches[0]){
        onPointerMove(e.touches[0].clientX);
        startDrag(e.touches[0].clientX);
      }
    }, {passive:true});

    carousel.addEventListener('touchmove', (e)=>{
      if(e.touches[0]){
        if(isDragging) e.preventDefault(); // stop browser horizontal swipe stealing the gesture
        onPointerMove(e.touches[0].clientX);
        moveDrag(e.touches[0].clientX);
      }
    }, {passive:false});

    carousel.addEventListener('touchend', endDrag, {passive:true});
    carousel.addEventListener('touchcancel', endDrag, {passive:true});

    // Pointer/mouse drag (also nice on desktop)
    carousel.addEventListener('pointerdown', (e)=>{
      onPointerMove(e.clientX);
      startDrag(e.clientX);
    });
    window.addEventListener('pointermove', (e)=>{
      if(!isDragging) return;
      onPointerMove(e.clientX);
      moveDrag(e.clientX);
    });
    window.addEventListener('pointerup', endDrag);

    const clamp = (v, lo, hi) => Math.min(hi, Math.max(lo, v));

    // animation
    let last = performance.now();
    function frame(){
      const now = performance.now(); const dt = now - last; last = now;
      const rect = carousel.getBoundingClientRect(); const w = rect.width; const center = w/2;

      let target = AUTO_DRIFT; // default drift
      let inDead = false;

      if(isDragging){
        target = 0; // user is driving; don't add hover drift
      } else if(mouseX != null){
        const norm = (mouseX - center) / center; // -1..1
        const absn = Math.abs(norm);
        if(absn < DEADZONE){ target = 0; inDead = true; }
        else {
          let t = (absn - DEADZONE) / (1 - DEADZONE); // 0..1
          t = clamp(t, 0, 1);
          t = Math.pow(t, EASING_POWER);
          target = Math.sign(norm) * (t * MAX_SPEED);
        }
      }

      speed += (target - speed) * SMOOTHING;
      if(inDead){ speed *= BRAKE; }
      if(inDead && Math.abs(speed) < 0.02) speed = 0;

      offset += speed * dt;
      if(trackW>0){ offset = ((offset % trackW) + trackW) % trackW; }
      track.style.transform = 'translate3d(' + (-offset) + 'px,0,0)';

      if(!reducedMotion) requestAnimationFrame(frame);
    }
    if(!reducedMotion) requestAnimationFrame(frame);

    // center-line glow hint
    const centerline = document.getElementById('centerline');
    function updateCenterline(){
      if(mouseX==null){ centerline.style.opacity = '.12'; return; }
      const w = carousel.getBoundingClientRect().width; const near = Math.abs(mouseX - w/2) < (w * DEADZONE);
      centerline.style.opacity = near? '.55' : '.12';
    }
    setInterval(updateCenterline, 80);

    // responsiveness (recompute on resize)
    const handleResize = () => { setConfigForViewport(); computeTrackWidth(); };
    window.addEventListener('resize', handleResize, {passive:true});
    new ResizeObserver(()=>{ handleResize(); }).observe(carousel);
  </script>

  <!-- Zapier Chatbot sizing fallback for shadow DOM -->
  <script>
  /* --- Zapier Chatbot: shadow-DOM aware resize (fallback if CSS can't reach) --- */
  (function(){
    const host = document.querySelector('zapier-interfaces-chatbot-embed');
    if(!host) return;

    const sizes = () => {
      const isMobile = matchMedia('(max-width: 768px)').matches;
      return {
        w: isMobile ? '92vw' : '380px',
        h: isMobile ? '65vh' : '560px',
        fab: isMobile ? '52px' : '56px'
      };
    };

    function applyInto(root){
      try{
        const {w,h,fab} = sizes();

        // Popup iframe inside the component (if shadowRoot is open)
        const iframe = root.querySelector('iframe');
        if(iframe){
          Object.assign(iframe.style, {
            width: w, height: h, maxWidth: '100%', maxHeight: '100%',
            position: 'fixed', right: '16px', bottom: '16px',
            borderRadius: '16px', border: '0', boxShadow: '0 12px 40px rgba(0,0,0,.35)', zIndex: 9999
          });
        }

        // Try to shrink the floating trigger button if exposed
        const trigger = root.querySelector('button, .trigger, [data-testid="popup-trigger"]');
        if(trigger){
          Object.assign(trigger.style, {
            width: fab, height: fab, borderRadius: '50%'
          });
        }
      }catch(e){}
    }

    function tick(){
      if(host.shadowRoot) applyInto(host.shadowRoot);
    }

    Object.assign(host.style, {position:'fixed', right:'16px', bottom:'16px', zIndex: 9998});

    const tries = [300, 800, 1500];
    tries.forEach(t => setTimeout(tick, t));
    const mo = new MutationObserver(tick);
    mo.observe(document.documentElement, {subtree:true, childList:true});
    addEventListener('resize', tick);
  })();
  </script>

  <!-- Zapier Chatbot -->
  <script async type='module' src='https://interfaces.zapier.com/assets/web-components/zapier-interfaces/zapier-interfaces.esm.js'></script>
  <zapier-interfaces-chatbot-embed is-popup='true' chatbot-id='cmehnpckl005ffcgsrk0r42w6'></zapier-interfaces-chatbot-embed>
</body>
</html>
